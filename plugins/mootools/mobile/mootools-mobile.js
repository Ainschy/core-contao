/* MooTools mobile, (c) Christoph Pojer (@cpojer), MIT-style license */
(function(){[Element,Window,Document].invoke("implement",{hasEvent:function(a){var b=this.retrieve("events"),c=b&&b[a]?b[a].values:null;if(c){var d=c.length;while(d--)if(d in c)return!0}return!1}});var a=function(a,b,c){return b=a[b],c=a[c],function(a,d){c&&!this.hasEvent(d)&&c.call(this,a,d),b&&b.call(this,a,d)}},b=function(a,b,c){return function(d,e){b[c].call(this,d,e),a[c].call(this,d,e)}},c=Element.Events;Element.defineCustomEvent=function(d,e){var f=c[e.base];return e.onAdd=a(e,"onAdd","onSetup"),e.onRemove=a(e,"onRemove","onTeardown"),c[d]=f?Object.append({},e,{base:f.base,condition:function(a,b){return(!f.condition||f.condition.call(this,a,b))&&(!e.condition||e.condition.call(this,a,b))},onAdd:b(e,f,"onAdd"),onRemove:b(e,f,"onRemove")}):e,this},Element.enableCustomEvents=function(){Object.each(c,function(a,b){a.onEnable&&a.onEnable.call(a,b)})},Element.disableCustomEvents=function(){Object.each(c,function(a,b){a.onDisable&&a.onDisable.call(a,b)})}})(),Browser.Features.Touch=function(){try{return document.createEvent("TouchEvent").initTouchEvent("touchstart"),!0}catch(a){}return!1}(),Browser.Features.iOSTouch=function(){var a="cantouch",b=document.html,c=!1;if(!b.addEventListener)return!1;var d=function(){b.removeEventListener(a,d,!0),c=!0};try{b.addEventListener(a,d,!0);var e=document.createEvent("TouchEvent");return e.initTouchEvent(a),b.dispatchEvent(e),c}catch(f){}return d(),!1}(),function(){var a="swipe",b=a+":distance",c=a+":cancelVertical",d=50,e={},f,g,h=function(){g=!1},i={touchstart:function(a){if(a.touches.length>1)return;var b=a.touches[0];g=!0,e={x:b.pageX,y:b.pageY}},touchmove:function(h){if(f||!g)return;var i=h.changedTouches[0],j={x:i.pageX,y:i.pageY};if(this.retrieve(c)&&Math.abs(e.y-j.y)>10){g=!1;return}var k=this.retrieve(b,d),l=j.x-e.x,m=l<-k,n=l>k;if(!n&&!m)return;h.preventDefault(),g=!1,h.direction=m?"left":"right",h.start=e,h.end=j,this.fireEvent(a,h)},touchend:h,touchcancel:h};Element.defineCustomEvent(a,{onSetup:function(){this.addEvents(i)},onTeardown:function(){this.removeEvents(i)},onEnable:function(){f=!1},onDisable:function(){f=!0,h()}})}();